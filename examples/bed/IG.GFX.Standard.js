var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},IGX;!function(IGX){var Std;!function(Std){function SetupValue(parameters,key,fallbackValue){void 0===parameters[key]?parameters[key]=fallbackValue:typeof parameters[key]===Std.cNumber||(typeof parameters[key]===Std.cString?(parameters[key]=eval(parameters[key].replace(commaRegex,".")),typeof parameters[key]!==Std.cNumber&&(parameters[key]=fallbackValue)):parameters[key]=fallbackValue)}function GetValue(a,b){return a[b]}function getAbsPath(a,b){var c=a.slice(0);if("."!==b)if(0===b.indexOf("..")){var d=a.lastIndexOf("."),e="";e=d===-1?a.substring(0,a.lastIndexOf("o")):a.substring(0,d+1),c=e+b.substr(2)}else c+="."===a[a.length-1]?b:"."+b;return c}Std.Minimum="Minimum",Std.Maximum="Maximum",Std.Snap="Snap",Std.Raster="Raster",Std.Values="Values",Std.StartValue="StartValue",Std.EndValue="EndValue",Std.StartTime="StartTime",Std.EndTime="EndTime",Std.Steps="Steps",Std.Mode="Mode",Std.XPosition="XPosition",Std.YPosition="YPosition",Std.ZPosition="ZPosition",Std.XRotation="XRotation",Std.YRotation="YRotation",Std.ZRotation="ZRotation",Std.Start="Start",Std.End="End",Std.Stage="Stage",Std.Period="Period",Std.BackwardPeriod="BackwardPeriod",Std.StageStart="StageStart",Std.StageEnd="StageEnd",Std.Manual="Manual",Std.cString="string",Std.cNumber="number";var commaRegex=/,/g;Std.SetupValue=SetupValue,Std.SetupValues=function(parameters,fallbackValues){void 0===parameters.Values?parameters.Values=fallbackValues:"string"==typeof parameters.Values&&(parameters.Values=eval(parameters.Values)),parameters.Values.sort(function(a,b){return a-b})},Std.GetValue=GetValue,Std.SetupAnimation=function(parameters){"string"==typeof parameters.Start&&(parameters.Start=eval(parameters.Start)),"string"==typeof parameters.End&&(parameters.End=eval(parameters.End)),"string"==typeof parameters.StageStart&&(parameters.StageStart=eval(parameters.StageStart)),"string"==typeof parameters.StageEnd&&(parameters.StageEnd=eval(parameters.StageEnd)),void 0===parameters.Stage?parameters.Stage=1:"string"==typeof parameters.Stage&&(parameters.Stage=eval(parameters.Stage)),void 0===parameters.Period?parameters.Period=1:"string"==typeof parameters.Period&&(parameters.Period=eval(parameters.Period)),void 0===parameters.BackwardPeriod?parameters.BackwardPeriod=parameters.Period:"string"==typeof parameters.BackwardPeriod&&(parameters.BackwardPeriod=eval(parameters.BackwardPeriod))},Std.getAbsPath=getAbsPath}(Std=IGX.Std||(IGX.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(){function b(){}return b.dlog=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];b.debug&&console.log(a)},b.calculatePosition=function(c,e,f,g,h,i,j,k,l){var m=g,n=h,o=j,p=i;l=l?[n,p].concat(l):[n,p],b.dlog("internal top attached",l);var q=a.API.GetWorldPosition(c);b.dlog("#--MatressInitialPosition",q);var r=e,s=f;b.dlog("minangleDeg",e),b.dlog("maxangleDeg",s);var t=a.API.GetWorldPosition(m),u=a.API.GetWorldPosition(n),v=a.API.GetWorldPosition(o),w=a.API.GetWorldPosition(p),x=a.API.GetWorldPosition(c),y={};l.forEach(function(c){b.dlog("attach1",c),y[c]={originalpos:a.API.GetWorldPosition(c),newpos:null},b.dlog("attached")}),b.dlog("leftLowPosRaw",t),b.dlog("leftUpPosRaw",u),b.dlog("rightLowPosRaw",v),b.dlog("rightUpPosRaw",w),b.dlog("articleToBeMoved",x);var z=d.sub(v,t);b.dlog("baseLineDir",z);var A=d.sub(t,v),B=d.sub(u,t),C=d.mag(A)*d.mag(B),D=d.dot(A,B),E=Math.acos(D/C);if(b.dlog("baseAngleRad",E,"baseAngleDeg",E*(180/Math.PI)),0===k){var F=d.sub(t,v),G=d.sub(w,v),H=d.mag(F)*d.mag(G),I=d.dot(F,G),J=Math.acos(I/H);console.log("0: initial A angle ",E*(180/Math.PI),"deg","initial B angle ",J*(180/Math.PI),"deg")}var K=d.normalize(d.cross(A,B));b.dlog("rotationnormal",K);var L=r*d.DEG2RAD,M=s*d.DEG2RAD,N=L+k*(M-L),O=N-E;b.dlog(k,"baseAngleRad:",E,"angwanted:",N,"ang difference:",O);var P=d.rotationMatrix(K,O);b.dlog("rotationsmatrix",P);var Q=d.add(t,d.multMat(P,d.sub(u,t)));b.dlog("rotated",Q);var R=Q.x,S=Q.y,T=Q.z,U=d.mag(d.sub(u,w))*d.mag(d.sub(u,w)),V=v.x,W=v.y,X=v.z,Y=d.mag(d.sub(w,v))*d.mag(d.sub(w,v));b.dlog(R,S,T,"--->",V,W,X,"]");var Z=d.sub(Q,v),$=new a.Float3(0,0,0);2*V-2*R!=0?$.x=(U-Y-R*R+V*V-S*S+W*W-T*T+X*X)/(2*V-2*R):2*W-2*S!=0?$.y=(U-Y-R*R+V*V-S*S+W*W-T*T+X*X)/(2*W-2*S):2*X-2*T!=0?$.z=(U-Y-R*R+V*V-S*S+W*W-T*T+X*X)/(2*X-2*T):console.warn("plane normal is null vector ?!");var _={point:$,normal:d.normalize({x:2*V-2*R,y:2*W-2*S,z:2*X-2*T})},aa=d.intersectionPoint({origin:v,direction:Z},_);b.dlog("schnittkreiszentrum",aa);var ba=d.mag(d.sub(u,w)),ca=d.mag(d.sub(aa,Q)),da=Math.sqrt(ba*ba-ca*ca);isNaN(da)&&console.warn("physical breakdown @ ",N*d.RAD2DEG),b.dlog("schnittkreisradius",da);var ea=d.normalize(d.cross(_.normal,K));b.dlog(ea);var fa=d.add(aa,d.scale(da,ea));b.dlog("tRotatedUpperRight",fa);var ga=z,ha=d.sub(w,u),ia=d.mag(ga)*d.mag(ha),ja=d.dot(ga,ha),ka=Math.acos(ja/ia);b.dlog("old baseAngle Deg ",ka*(180/Math.PI));var la=z,ma=d.sub(fa,Q),na=d.mag(la)*d.mag(ma),oa=d.dot(la,ma),pa=Math.acos(oa/na),qa=pa*(180/Math.PI);b.dlog("new baseAngle Deg ",pa*(180/Math.PI),"newbaseAngleRad:",pa);var ra=d.rotatedVectorAaroundPointBbyNormalCangleRadR(u,q,K,-(pa-ka));b.dlog("detached_UpPosRaw_calc",ra);var sa=d.sub(Q,ra);return Object.keys(y).forEach(function(a){var b=y[a],c=d.rotatedVectorAaroundPointBbyNormalCangleRadR(b.originalpos,q,K,-(pa-ka));b.newpos=d.add(c,sa)}),{rotation:qa,positionDifference:sa,topAttached:y,baseLineDir:z}},b.debug=!1,b.calculateAngleAgainstBaseBack=function(b,c,e){var f=a.API.GetWorldPosition(c),g=d.sub(f,b.topAttached[e].newpos),h=b.baseLineDir,i=d.angleBetweenRad(g,h),j=i*d.RAD2DEG;return j},b}();b.FourBar=c;var d=function(){function b(){}return b.add=function(b,c){return new a.Float3(b.x+c.x,b.y+c.y,b.z+c.z)},b.sub=function(b,c){return new a.Float3(b.x-c.x,b.y-c.y,b.z-c.z)},b.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z},b.mag=function(a){return Math.sqrt(b.dot(a,a))},b.cross=function(b,c){return new a.Float3(b.y*c.z-b.z*c.y,b.z*c.x-b.x*c.z,b.x*c.y-b.y*c.x)},b.scale=function(b,c){return new a.Float3(b*c.x,b*c.y,b*c.z)},b.normalize=function(c){var d=b.mag(c);if(0===d)return null;var e=new a.Float3(c.x/d,c.y/d,c.z/d);return e},b.multMat=function(b,c){return new a.Float3(b[0][0]*c.x+b[0][1]*c.y+b[0][2]*c.z,b[1][0]*c.x+b[1][1]*c.y+b[1][2]*c.z,b[2][0]*c.x+b[2][1]*c.y+b[2][2]*c.z)},b.factorOfDirectionFromRayToPlane=function(a,c){var d=b.dot(c.normal,a.direction),e=-b.dot(c.point,c.normal);if(0===d){var f=b.dot(c.normal,a.origin)+e;return 0===f?0:null}var g=-(b.dot(a.origin,c.normal)+e)/d;return g>=0?g:null},b.intersectionPoint=function(a,c){var d=b.factorOfDirectionFromRayToPlane(a,c);if(null===d)return null;var e=b.scale(d,a.direction),f=b.add(e,a.origin);return f},b.angleBetweenRad=function(a,c){var d=b.mag(a)*b.mag(c),e=b.dot(a,c),f=Math.acos(e/d);return f},b.rotatedVectorAaroundPointBbyNormalCangleRadR=function(a,d,e,f){var g=e.x,h=e.y,i=e.z,j=Math.sin,k=Math.cos,l=1-k(f),m=j(f),n=k(f),o=[[g*g*l+n,g*h*l-i*m,g*i*l+h*m],[h*g*l+i*m,h*h*l+n,h*i*l-g*m],[i*g*l-h*m,i*h*l+g*m,i*i*l+n]],p=b.add(d,b.multMat(o,b.sub(a,d)));return c.dlog("RotateVectorAaroundPointBbyNormalCangleRadR",a,d,e,f,"-->",p),p},b.rotationMatrix=function(a,b){var c=a,d=c.x,e=c.y,f=c.z,g=b,h=Math.sin,i=Math.cos,j=1-i(g),k=h(g),l=i(g),m=[[d*d*j+l,d*e*j-f*k,d*f*j+e*k],[e*d*j+f*k,e*e*j+l,e*f*j-d*k],[f*d*j-e*k,f*e*j+d*k,f*f*j+l]];return m},b.GetLocalPosition=function(a,b){var c=this.GetLocalTransform(a,b);return c[0]},b.GetLocalRotation=function(a,b){var c=this.GetLocalTransform(a,b);return IG.Math.Euler.createFromQuaternion(c[1])},b.GetLocalTransform=function(b,c){var d=c;if(!a.API.IsValid(b))return void console.warn("node is not valid!",b);if(!a.API.IsValid(d))return void console.warn("node is not valid!",d);if(null==a.API.GetParent(d))return console.warn("node has no parent!"),new Object[3]([new a.Float3,IG.Math.Quaternion.create(),new a.Float3(1,1,1)]);if(d===b)return console.warn("node is root!"),new Object[3]([new a.Float3,IG.Math.Quaternion.create(),new a.Float3(1,1,1)]);var e=new Array;for(e.push(d);d!==b;)d=a.API.GetParent(d),e.push(d);e.pop(),e.reverse();var f=IG.Math.Matrix4.create();e.forEach(function(b){var c,d,e=a.API.GetScaling(b),g={x:a.API.GetXRotation(b)*a.Std.Util.DEG2RAD,y:a.API.GetYRotation(b)*a.Std.Util.DEG2RAD,z:a.API.GetZRotation(b)*a.Std.Util.DEG2RAD};d=IG.Math.Quaternion.createFromEuler({x:g.x,y:g.y,z:g.z,order:"xyz"});var h=a.API.GetPosition(b);c=IG.Math.Matrix4.compose(h,d,e),f=IG.Math.Matrix4.multiply(f,c)});var g=IG.Math.Matrix4.decompose(f);return g},b.DEG2RAD=Math.PI/180,b.RAD2DEG=180/Math.PI,b}();b.Util=d}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,90),b.SetupValue(a,b.Snap,0),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;"Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d&&a.API.SetXRotation(this.GetComponentId(),d),void 0!==e&&a.API.SetXRotation(this.GetComponentId(),e)}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;Math.abs(g-e)<this.parameters[b.Snap]?g=e:Math.abs(g-f)<this.parameters[b.Snap]&&(g=f),a.API.SetXRotation(this.GetComponentId(),g)}},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"x",void 0).nullAxis,this.absRotation=a.API.GetXRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetXRotation(this.GetComponentId()),e=a.API.GetInteractionData(this,b,"x",this.nullAxis);this.absRotation+=e.angle*a.API.MotionScale;var f=c?this.parameters.Snap:0;d=this.absRotation>=this.parameters.Maximum-f?this.parameters.Maximum:this.absRotation<=this.parameters.Minimum+f?this.parameters.Minimum:this.absRotation,a.API.SetXRotation(this.GetComponentId(),d),this.nullAxis=a.API.GetInteractionData(this,b,"x",void 0).nullAxis},d}(a.Core.Interactor);b.XRangeRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,1),b.SetupValue(a,b.Snap,0),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;if("Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d){var f=a.API.GetPosition(this.GetComponentId());f.x=d,a.API.SetPosition(this.GetComponentId(),f)}if(void 0!==e){var f=a.API.GetPosition(this.GetComponentId());f.x=e,a.API.SetPosition(this.GetComponentId(),f)}}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;Math.abs(g-e)<this.parameters[b.Snap]?g=e:Math.abs(g-f)<this.parameters[b.Snap]&&(g=f);var h=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(g,h.y,h.z))}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).x},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(this.startPosition,d.y,d.z));var e=this.parameters.Minimum,f=this.parameters.Maximum,g=c?this.parameters.Snap:0,h=a.API.GetInteractionData(this,b).point,i=h.x-this.osCoords.x,j=c?d.x:this.startPosition+.2*i;j>=f-g?j=f:j<=e+g&&(j=e),a.API.SetPosition(this.GetComponentId(),new a.Float3(j,d.y,d.z))},d}(a.Core.Interactor);b.XRangeTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,90),b.SetupValue(a,b.Raster,15),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;"Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d&&a.API.SetXRotation(this.GetComponentId(),d),void 0!==e&&a.API.SetXRotation(this.GetComponentId(),e)}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;g<e?g=e:g>f&&(g=f),a.API.SetXRotation(this.GetComponentId(),g)}},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"x",void 0).nullAxis,this.absRotation=a.API.GetXRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetXRotation(this.GetComponentId()),e=a.API.GetInteractionData(this,b,"x",this.nullAxis),f=e.angle*a.API.MotionScale;this.absRotation+=f;for(var g=this.parameters.Minimum;g<=this.absRotation;)g+=this.parameters.Raster;var h=g-this.parameters.Raster,i=.5*(g+h);d=this.absRotation>i?g:h,d<this.parameters.Minimum?d=this.parameters.Minimum:d>=this.parameters.Maximum&&(d=this.parameters.Maximum),a.API.SetXRotation(this.GetComponentId(),d),this.nullAxis=a.API.GetInteractionData(this,b,"x",void 0).nullAxis},d}(a.Core.Interactor);b.XRasterRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,1),b.SetupValue(a,b.Raster,.25),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;if("Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d){var f=a.API.GetPosition(this.GetComponentId());f.x=d,a.API.SetPosition(this.GetComponentId(),f)}if(void 0!==e){var f=a.API.GetPosition(this.GetComponentId());f.x=e,a.API.SetPosition(this.GetComponentId(),f)}}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;g<e?g=e:g>f&&(g=f);var h=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(g,h.y,h.z))}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).x},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId()),e=this.parameters.Minimum,f=this.parameters.Maximum,g=this.parameters.Raster,h=a.API.GetInteractionData(this,b).point,i=h.x-this.osCoords.x;if(Math.abs(i)>Math.abs(g)){var j=d.x;j+=i>0?g:-g,j=e+g*Math.round((j-e)/g),j<e?j=e:j>f&&(j=f),a.API.SetPosition(this.GetComponentId(),new a.Float3(j,d.y,d.z)),this.osCoords=h}},d}(a.Core.Interactor);b.XRasterTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValues(a,[0,90]),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(b){var c=this.parameters[b];void 0!==c&&a.API.SetXRotation(this.GetComponentId(),c)},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"x",void 0).nullAxis,this.absRotation=a.API.GetXRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=(a.API.GetXRotation(this.GetComponentId()),a.API.GetInteractionData(this,b,"x",this.nullAxis)),e=d.angle*a.API.MotionScale;this.absRotation+=e;for(var f=this.parameters.Values[0],g=Math.abs(this.absRotation-f),h=1;h<this.parameters.Values.length;h++){var i=Math.abs(this.absRotation-this.parameters.Values[h]);i<g&&(f=this.parameters.Values[h],g=i)}a.API.SetXRotation(this.GetComponentId(),f),this.nullAxis=a.API.GetInteractionData(this,b,"x",void 0).nullAxis},d}(a.Core.Interactor);b.XValueRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValues(a,[0,1]),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(b){var c=this.parameters[b];if(void 0!==c){var d=a.API.GetPosition(this.GetComponentId());d.x=c,a.API.SetPosition(this.GetComponentId(),d)}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).x},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(this.startPosition,d.y,d.z));for(var e=this.parameters.Values,f=a.API.GetInteractionData(this,b).point,g=f.x-this.osCoords.x,h=d.x,i=0,j=Math.abs(h-e[i]),k=1;k<e.length;k++){var l=Math.abs(h-e[k]);l<j&&(i=k,j=l)}g>0?i<e.length-1&&i++:g<0&&i>0&&i--,h=e[i],a.API.SetPosition(this.GetComponentId(),new a.Float3(h,d.y,d.z)),this.osCoords=f},d}(a.Core.Interactor);b.XValueTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,90),b.SetupValue(a,b.Snap,0),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;"Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d&&a.API.SetYRotation(this.GetComponentId(),d),void 0!==e&&a.API.SetYRotation(this.GetComponentId(),e)}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;Math.abs(g-e)<this.parameters[b.Snap]?g=e:Math.abs(g-f)<this.parameters[b.Snap]&&(g=f),a.API.SetYRotation(this.GetComponentId(),g)}},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"y",void 0).nullAxis,this.absRotation=a.API.GetYRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetYRotation(this.GetComponentId()),e=a.API.GetInteractionData(this,b,"y",this.nullAxis);this.absRotation+=e.angle*a.API.MotionScale;var f=c?this.parameters.Snap:0;d=this.absRotation>=this.parameters.Maximum-f?this.parameters.Maximum:this.absRotation<=this.parameters.Minimum+f?this.parameters.Minimum:this.absRotation,a.API.SetYRotation(this.GetComponentId(),d),this.nullAxis=a.API.GetInteractionData(this,b,"y",void 0).nullAxis},d}(a.Core.Interactor);b.YRangeRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,1),b.SetupValue(a,b.Snap,0),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;if("Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d){var f=a.API.GetPosition(this.GetComponentId());f.y=d,a.API.SetPosition(this.GetComponentId(),f)}if(void 0!==e){var f=a.API.GetPosition(this.GetComponentId());f.y=e,a.API.SetPosition(this.GetComponentId(),f)}}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;Math.abs(g-e)<this.parameters[b.Snap]?g=e:Math.abs(g-f)<this.parameters[b.Snap]&&(g=f);var h=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(h.x,g,h.z))}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).y},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,this.startPosition,d.z));var e=this.parameters.Minimum,f=this.parameters.Maximum,g=c?this.parameters.Snap:0,h=a.API.GetInteractionData(this,b).point,i=h.y-this.osCoords.y,j=c?d.y:this.startPosition+.2*i;j>=f-g?j=f:j<=e+g&&(j=e),a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,j,d.z))},d}(a.Core.Interactor);b.YRangeTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,90),b.SetupValue(a,b.Raster,15),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;"Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d&&a.API.SetYRotation(this.GetComponentId(),d),void 0!==e&&a.API.SetYRotation(this.GetComponentId(),e)}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;g<e?g=e:g>f&&(g=f),a.API.SetYRotation(this.GetComponentId(),g)}},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"y",void 0).nullAxis,this.absRotation=a.API.GetYRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetYRotation(this.GetComponentId()),e=a.API.GetInteractionData(this,b,"y",this.nullAxis),f=e.angle*a.API.MotionScale;this.absRotation+=f;for(var g=this.parameters.Minimum;g<=this.absRotation;)g+=this.parameters.Raster;var h=g-this.parameters.Raster,i=.5*(g+h);d=this.absRotation>i?g:h,d<this.parameters.Minimum?d=this.parameters.Minimum:d>=this.parameters.Maximum&&(d=this.parameters.Maximum),a.API.SetYRotation(this.GetComponentId(),d),this.nullAxis=a.API.GetInteractionData(this,b,"y",void 0).nullAxis},d}(a.Core.Interactor);b.YRasterRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,1),b.SetupValue(a,b.Raster,.25),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;if("Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d){var f=a.API.GetPosition(this.GetComponentId());f.y=d,a.API.SetPosition(this.GetComponentId(),f)}if(void 0!==e){var f=a.API.GetPosition(this.GetComponentId());f.y=e,a.API.SetPosition(this.GetComponentId(),f)}}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;g<e?g=e:g>f&&(g=f);var h=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(h.x,g,h.z))}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).y},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId()),e=this.parameters.Minimum,f=this.parameters.Maximum,g=this.parameters.Raster,h=a.API.GetInteractionData(this,b).point,i=h.y-this.osCoords.y;if(Math.abs(i)>Math.abs(g)){var j=d.y;j+=i>0?g:-g,j=e+g*Math.round((j-e)/g),j<e?j=e:j>f&&(j=f),a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,j,d.z)),this.osCoords=h}},d}(a.Core.Interactor);b.YRasterTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValues(a,[0,90]),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(b){var c=this.parameters[b];void 0!==c&&a.API.SetYRotation(this.GetComponentId(),c)},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"y",void 0).nullAxis,this.absRotation=a.API.GetYRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=(a.API.GetYRotation(this.GetComponentId()),a.API.GetInteractionData(this,b,"y",this.nullAxis)),e=d.angle*a.API.MotionScale;this.absRotation+=e;for(var f=this.parameters.Values[0],g=Math.abs(this.absRotation-f),h=1;h<this.parameters.Values.length;h++){var i=Math.abs(this.absRotation-this.parameters.Values[h]);i<g&&(f=this.parameters.Values[h],g=i)}a.API.SetYRotation(this.GetComponentId(),f),this.nullAxis=a.API.GetInteractionData(this,b,"y",void 0).nullAxis},d}(a.Core.Interactor);b.YValueRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){
var d=this;return b.SetupValues(a,[0,1]),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(b){var c=this.parameters[b];if(void 0!==c){var d=a.API.GetPosition(this.GetComponentId());d.y=c,a.API.SetPosition(this.GetComponentId(),d)}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).y},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,this.startPosition,d.z));for(var e=this.parameters.Values,f=a.API.GetInteractionData(this,b).point,g=f.y-this.osCoords.y,h=d.y,i=0,j=Math.abs(h-e[i]),k=1;k<e.length;k++){var l=Math.abs(h-e[k]);l<j&&(i=k,j=l)}g>0?i<e.length-1&&i++:g<0&&i>0&&i--,h=e[i],a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,h,d.z)),this.osCoords=f},d}(a.Core.Interactor);b.YValueTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,90),b.SetupValue(a,b.Snap,0),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;"Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d&&a.API.SetZRotation(this.GetComponentId(),d),void 0!==e&&a.API.SetZRotation(this.GetComponentId(),e)}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;Math.abs(g-e)<this.parameters[b.Snap]?g=e:Math.abs(g-f)<this.parameters[b.Snap]&&(g=f),a.API.SetZRotation(this.GetComponentId(),g)}},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"z",void 0).nullAxis,this.absRotation=a.API.GetZRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetZRotation(this.GetComponentId()),e=a.API.GetInteractionData(this,b,"z",this.nullAxis);this.absRotation+=e.angle*a.API.MotionScale;var f=c?this.parameters.Snap:0;d=this.absRotation>=this.parameters.Maximum-f?this.parameters.Maximum:this.absRotation<=this.parameters.Minimum+f?this.parameters.Minimum:this.absRotation,a.API.SetZRotation(this.GetComponentId(),d),this.nullAxis=a.API.GetInteractionData(this,b,"z",void 0).nullAxis},d}(a.Core.Interactor);b.ZRangeRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,1),b.SetupValue(a,b.Snap,0),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;if("Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d){var f=a.API.GetPosition(this.GetComponentId());f.z=d,a.API.SetPosition(this.GetComponentId(),f)}if(void 0!==e){var f=a.API.GetPosition(this.GetComponentId());f.z=e,a.API.SetPosition(this.GetComponentId(),f)}}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;Math.abs(g-e)<this.parameters[b.Snap]?g=e:Math.abs(g-f)<this.parameters[b.Snap]&&(g=f);var h=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(h.x,h.y,g))}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).z},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,d.y,this.startPosition));var e=this.parameters.Minimum,f=this.parameters.Maximum,g=c?this.parameters.Snap:0,h=a.API.GetInteractionData(this,b).point,i=h.z-this.osCoords.z,j=c?d.z:this.startPosition+.2*i;j>=f-g?j=f:j<=e+g&&(j=e),a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,d.y,j))},d}(a.Core.Interactor);b.ZRangeTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,90),b.SetupValue(a,b.Raster,15),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;"Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d&&a.API.SetZRotation(this.GetComponentId(),d),void 0!==e&&a.API.SetZRotation(this.GetComponentId(),e)}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;g<e?g=e:g>f&&(g=f),a.API.SetZRotation(this.GetComponentId(),g)}},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"z",void 0).nullAxis,this.absRotation=a.API.GetZRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){if(!c){var d=a.API.GetZRotation(this.GetComponentId()),e=a.API.GetInteractionData(this,b,"z",this.nullAxis),f=e.angle*a.API.MotionScale;this.absRotation+=f;for(var g=this.parameters.Minimum;g<=this.absRotation;)g+=this.parameters.Raster;var h=g-this.parameters.Raster,i=.5*(g+h);d=this.absRotation>i?g:h,d<this.parameters.Minimum?d=this.parameters.Minimum:d>=this.parameters.Maximum&&(d=this.parameters.Maximum),a.API.SetZRotation(this.GetComponentId(),d),this.nullAxis=a.API.GetInteractionData(this,b,"z",void 0).nullAxis}},d}(a.Core.Interactor);b.ZRasterRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.Minimum,0),b.SetupValue(a,b.Maximum,1),b.SetupValue(a,b.Raster,.25),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(c){if(void 0!==this.parameters[c]||void 0!==this.parameters[b.Minimum]||void 0!==this.parameters[b.Maximum]){var d,e;if("Start"===c&&(d=void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]),"End"===c&&(e=void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]),void 0!==d){var f=a.API.GetPosition(this.GetComponentId());f.z=d,a.API.SetPosition(this.GetComponentId(),f)}if(void 0!==e){var f=a.API.GetPosition(this.GetComponentId());f.z=e,a.API.SetPosition(this.GetComponentId(),f)}}},d.prototype.SetStagePosition=function(c,d){if(c.toString()===this.parameters[b.Stage].toString()&&!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[b.Minimum]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[b.Maximum])){var e,f;e=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[b.Minimum]:this.parameters[b.Start]:this.parameters[b.StageStart],f=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[b.Maximum]:this.parameters[b.End]:this.parameters[b.StageEnd];var g=e+(f-e)*d;g<e?g=e:g>f&&(g=f);var h=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(h.x,h.y,g))}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).z},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId()),e=this.parameters.Minimum,f=this.parameters.Maximum,g=this.parameters.Raster,h=a.API.GetInteractionData(this,b).point,i=h.z-this.osCoords.z;if(Math.abs(i)>Math.abs(g)){var j=d.z;j+=i>0?g:-g,j=e+g*Math.round((j-e)/g),j<e?j=e:j>f&&(j=f),a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,d.y,j)),this.osCoords=h}},d}(a.Core.Interactor);b.ZRasterTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValues(a,[0,90]),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(b){var c=this.parameters[b];void 0!==c&&a.API.SetZRotation(this.GetComponentId(),c)},d.prototype.SingleTouchStart=function(b){this.nullAxis=a.API.GetInteractionData(this,b,"z",void 0).nullAxis,this.absRotation=a.API.GetZRotation(this.GetComponentId())},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){this.ApplyMotion(a,!0)},d.prototype.ApplyMotion=function(b,c){var d=(a.API.GetZRotation(this.GetComponentId()),a.API.GetInteractionData(this,b,"z",this.nullAxis)),e=d.angle*a.API.MotionScale;this.absRotation+=e;for(var f=this.parameters.Values[0],g=Math.abs(this.absRotation-f),h=1;h<this.parameters.Values.length;h++){var i=Math.abs(this.absRotation-this.parameters.Values[h]);i<g&&(f=this.parameters.Values[h],g=i)}a.API.SetZRotation(this.GetComponentId(),f),this.nullAxis=a.API.GetInteractionData(this,b,"z",void 0).nullAxis},d}(a.Core.Interactor);b.ZValueRotator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValues(a,[0,1]),b.SetupAnimation(a),d=c.call(this,a)||this,d.parameters.Manual=!0,d}return __extends(d,c),d.prototype.SetPosition=function(b){var c=this.parameters[b];if(void 0!==c){var d=a.API.GetPosition(this.GetComponentId());d.z=c,a.API.SetPosition(this.GetComponentId(),d)}},d.prototype.SingleTouchStart=function(b){this.osCoords=a.API.GetInteractionData(this,b).point,this.startPosition=a.API.GetPosition(this.GetComponentId()).z},d.prototype.SingleTouchMotion=function(a){this.ApplyMotion(a,!1)},d.prototype.SingleTouchEnd=function(a){},d.prototype.ApplyMotion=function(b,c){var d=a.API.GetPosition(this.GetComponentId());a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,d.y,this.startPosition));for(var e=this.parameters.Values,f=a.API.GetInteractionData(this,b).point,g=f.z-this.osCoords.z,h=d.z,i=0,j=Math.abs(h-e[i]),k=1;k<e.length;k++){var l=Math.abs(h-e[k]);l<j&&(i=k,j=l)}g>0?i<e.length-1&&i++:g<0&&i>0&&i--,h=e[i],a.API.SetPosition(this.GetComponentId(),new a.Float3(d.x,d.y,h)),this.osCoords=f},d}(a.Core.Interactor);b.ZValueTranslator=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c=function(c){function d(a){var d=this;return b.SetupValue(a,b.StartValue,0),b.SetupValue(a,b.EndValue,0),b.SetupValue(a,b.StartTime,0),b.SetupValue(a,b.EndTime,1),b.SetupAnimation(a),d=c.call(this,a)||this}return __extends(d,c),d.prototype.SetPosition=function(a){},d.prototype.ApplyValue=function(c){var d,e=this.GetComponentId();switch(this.parameters[b.Mode]){case b.XPosition:d=a.API.GetPosition(e),a.API.SetPosition(e,new a.Float3(c,d.y,d.z));break;case b.YPosition:d=a.API.GetPosition(e),a.API.SetPosition(e,new a.Float3(d.x,c,d.z));break;case b.ZPosition:d=a.API.GetPosition(e),a.API.SetPosition(e,new a.Float3(d.x,d.y,c));break;case b.XRotation:a.API.SetXRotation(e,c);break;case b.YRotation:a.API.SetYRotation(e,c);break;case b.ZRotation:a.API.SetZRotation(e,c)}},d.prototype.SetStagePosition=function(a,c){var d=b.GetValue(this.parameters,b.Stage),e=b.GetValue(this.parameters,b.StartValue),f=b.GetValue(this.parameters,b.EndValue);if(a<d)return void this.ApplyValue(e);if(a>d)return void this.ApplyValue(f);var g=b.GetValue[(this.parameters,b.StartTime)],h=b.GetValue[(this.parameters,b.EndTime)];if(c<g)return void this.ApplyValue(e);if(c>h)return void this.ApplyValue(f);var i=(f-e)/(h-g);this.ApplyValue(f-(h-c)*i)},d}(a.Core.Interactor);b.BasicLinearInteractor=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(a){var b=function(){function a(){}return a}();a.KinematicChain=b}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(a){var b=function(){function a(){}return a}();a.AnimationState=b;var c=function(){function a(){}return a}();a.Animation=c}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;!function(IGX){var Std;!function(Std){var KinematicsInteractor=function(){function KinematicsInteractor(param){var _this=this;if("object"!=typeof param)return void console.warn("IGX.Std.KinematicsInteractor: Not defined.");if(Array.isArray(param))this._MultiTargetChain=new Array,param.forEach(function(chain){var subChain=eval(chain);return subChain.Target?subChain.Tolerance?subChain.GeometryBase?void _this._MultiTargetChain.push(subChain):void console.warn("IGX.Std.KinematicsInteractor: Subchain has no GeometryBase defined!"):void console.warn("IGX.Std.KinematicsInteractor: Subchain has no tolerance!"):void console.warn("IGX.Std.KinematicsInteractor: Subchain has no target!")}),console.log("DEBUG:",this._MultiTargetChain);else{if(this._Chain=eval(param),!this._Chain.Target)return void console.warn("IGX.Std.KinematicsInteractor: Chain has no target!");if(!this._Chain.Tolerance)return void console.warn("IGX.Std.KinematicsInteractor: Chain has no tolerance!");if(!this._Chain.GeometryBase)return void console.warn("IGX.Std.KinematicsInteractor: Interactor has no GeometryBase defined!")}}return KinematicsInteractor.prototype.KinematicSolver=function(a,b,c){var d,e=this,f=a,g=f.split("_")[0]+"__",h=f+".",i=1;this._MultiTargetChain?i=this._MultiTargetChain.length:d=this._Chain;for(var j=function(a){if(k._MultiTargetChain&&(d=k._MultiTargetChain[a]),!(d.Joints.length>0&&d.Joints[0].HeadX))return console.warn("IGX.Std.KinematicsInteractor: Chain has no defined joints!"),{value:void 0};d._Origin=d.Joints[0].HeadX;for(var i=d._Origin.split("."),j="",l=0;l<i.length-1;l++)j+=i[l],l+1<i.length-1&&(j+=".");d._ChainPath=j,k._RootId=""===j?f:f+"."+j;var m=[],n=0,o=/param(\d+)/i;d.Joints.forEach(function(a,d){var f,g,i,j,k,l,p,q,r,s,t,u,v,w=!1;if(a.Name){var x=a.Name.match(o);g=x?b[parseInt(x[1])-1]:a.Name}else g="b"+d;if(!a.HeadX)return void console.warn("IGX.Std.KinematicsInteractor: Joint",g,"is missing its Head (X)!");var x=a.HeadX.match(o);if(i=x?b[parseInt(x[1])-1]:a.HeadX,!a.HeadY)return void console.warn("IGX.Std.KinematicsInteractor: Joint",g,"is missing its Head (Y)!");var x=a.HeadY.match(o);if(j=x?b[parseInt(x[1])-1]:a.HeadY,!a.HeadZ)return void console.warn("IGX.Std.KinematicsInteractor: Joint",g,"is missing its Head (Z)!");var x=a.HeadZ.match(o);if(k=x?b[parseInt(x[1])-1]:a.HeadZ,!a.Tail)return void console.warn("IGX.Std.KinematicsInteractor: Joint",g,"is missing its Tail!");var x=a.Tail.match(o);if(l=x?b[parseInt(x[1])-1]:a.Tail,!e.isParent(k,l))return void console.warn("IGX.Std.KinematicsInteractor: Joint",g,"- Tail isn't child of Head!");s=a.LimitLeft,t=a.LimitRight,u=a.LimitUp,v=a.LimitDown;var y=h+i,z=h+j,A=h+k,B=h+l;c.forEach(function(a){y!==a&&z!==a&&A!==a&&B!==a||(w=!0)}),q=IGX.Std.Util.GetLocalPosition(e._RootId,h+i),r=IGX.Std.Util.GetLocalPosition(e._RootId,h+l),p=IG.Math.Vector3.magnitude(IG.Math.Vector3.sub(q,r)),n+=p,f={Name:g,HeadX:i,HeadY:j,HeadZ:k,Tail:l,LimitLeft:s,LimitRight:t,LimitUp:u,LimitDown:v,_Length:p,_HeadPos:q,_TailPos:r,_Blocked:w},m.push(f)}),d.Joints=m;var p=d.Target.match(o);if(p&&(d.Target=b[parseInt(p[1])-1]),IGX.API.IsValid(h+d._Origin)&&(d._OriginPos=IGX.Std.Util.GetLocalPosition(k._RootId,h+d._Origin)),IGX.API.IsValid(g+d.Target)){var q=IGX.API.GetWorldPosition(k._RootId),r=IGX.API.GetWorldPosition(g+d.Target);d._TargetPos=IG.Math.Vector3.sub(r,q)}else"subbase"===d.Target?d._TargetPos=d.Joints[d.Joints.length-1]._TailPos:console.warn("Target path",d.Target,"not valid.");d._TotalLength=n,"x"!==d.GeometryBase&&"y"!==d.GeometryBase&&"z"!==d.GeometryBase&&(console.warn('GeometryBase param received not allowed value! Only "x", "y" and "z" are allowed! Returning to default value ("z")'),d.GeometryBase="z"),"y"===d.GeometryBase&&(console.warn("GeometryBase = y not implemented yet. Switching to z now."),d.GeometryBase="z")},k=this,l=0;l<i;l++){var m=j(l);if("object"==typeof m)return m.value}this._MultiTargetChain?this.multiTargetKinematics(h):this.singleTargetKinematics(h)},KinematicsInteractor.prototype.isParent=function(a,b){var c=a.split("."),d=b.split(".");return c.forEach(function(a,b){if(a!==d[b])return!1}),!0},KinematicsInteractor.prototype.getGeometryBase=function(a){var b=this._Chain,c=b.Joints[a],d=b.GeometryBase;return void 0!==c.GeometryBase&&(d=c.GeometryBase),d},KinematicsInteractor.prototype.getBoneEuler=function(a,b,c){var d=IG.Math.Matrix4.lookAt(b,c,void 0,a),e=IG.Math.Euler.createFromRotationMatrix(d);return"x"!==a||e.x!==Math.PI&&e.x!==-Math.PI?"z"!==a||e.z!==Math.PI&&e.z!==-Math.PI||(e.z=0,e.x*=-1):(e.x=0,e.z*=-1),e},KinematicsInteractor.prototype.isConstraintActive=function(a){var b=this._Chain.Joints[a];return void 0!==b.LimitLeft&&void 0!==b.LimitRight&&void 0!==b.LimitUp&&void 0!==b.LimitDown},KinematicsInteractor.prototype.getChainLevel=function(a){if(!a._ParentChain||"root"===a.Parent)return a._Level=0,0;var b=this.getChainLevel(a._ParentChain)+1;return a._Level=b,b},KinematicsInteractor.prototype.getEndEffectors=function(a){var b={};return this._MultiTargetChainStructure[a].forEach(function(a){b[a.Parent]||(b[a.Parent]=new Array),b[a.Parent].push(a)}),b},KinematicsInteractor.prototype.singleTargetKinematics=function(a){this.forward(),this.solve(),this.draw(a)},KinematicsInteractor.prototype.multiTargetKinematics=function(a){var b=this,c=this._MultiTargetChain[0];this._MultiTargetChain.forEach(function(a){if(!a.Parent)return void console.warn("IGX.Std.KinematicsInteractor: A chain has no set Root param! (multi target kinematics)");if("root"===a.Parent)c=a;else{for(var d=0;d<b._MultiTargetChain.length;d++)if(a._ChainPath!==b._MultiTargetChain[d]._ChainPath&&a.Parent===b._MultiTargetChain[d]._ChainPath){a._ParentChain=b._MultiTargetChain[d];break}if(!a._ParentChain)return void console.warn("Couldn't find parent for kinematic chain",a._ChainPath)}}),this._MultiTargetChain.forEach(function(a){a._Level||(a._Level=b.getChainLevel(a))}),this._MultiTargetChainStructure={};var d=0;this._MultiTargetChain.forEach(function(a){b._MultiTargetChainStructure[a._Level]||(b._MultiTargetChainStructure[a._Level]=new Array),b._MultiTargetChainStructure[a._Level].push(a),a._Level>d&&(d=a._Level)});var e=!0,f=0,g=10;for(null!=c.MaxIterations&&(g=c.MaxIterations);e;){for(var h=d;h>0;h--)if(this._MultiTargetChainStructure.hasOwnProperty(h)){var i=this.getEndEffectors(h);for(var j in i)if(i.hasOwnProperty(j)){var k=i[j];this.multiTargetSolve(k,h)}}for(var l=0,m=this._MultiTargetChain;l<m.length;l++){var n=m[l],o=n.Joints[n.Joints.length-1]._TailPos,p=IG.Math.Vector3.magnitude(IG.Math.Vector3.sub(o,n._TargetPos));if(!(p<n.Tolerance)){e=!0;break}e=!1}if(f++,f>g)break}this._MultiTargetChain.forEach(function(c){b._Chain=c,b.draw(a)})},KinematicsInteractor.prototype.multiTargetSolve=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];this._Chain=d,this.backward()}var e=new IG.Math.Vector3(0,0,0);a.forEach(function(a){e=IG.Math.Vector3.add(e,a.Joints[0]._HeadPos)}),e=IG.Math.Vector3.scalarMultiply(1/a.length,e);var f;this._Chain=this._Chain._ParentChain;for(var g=!1,c=0;c<this._Chain.Joints.length;c++){if(!this._Chain.Joints[c]._Blocked){g=!1;break}g=!0}g?f=e:(this._Chain._TargetPos=e,this.forward(),this.solve());var h=this._Chain;if(b>1&&"root"!==h.Parent){var i=this.getEndEffectors(h._Level);this.multiTargetSolve(i[h.Parent],h._Level)}f=h.Joints[h.Joints.length-1]._TailPos;for(var c=0;c<a.length;c++){var d=a[c];this._Chain=d,this._Chain._OriginPos=f,this.forward()}},KinematicsInteractor.prototype.draw=function(a){var b=this,c=this._Chain;c.Joints.forEach(function(c,d){IGX.API.SetPosition(a+c.HeadX,c._HeadPos);var e=b.getGeometryBase(d),f=b.getBoneEuler(e,c._HeadPos,c._TailPos),g=f.x*IG.Math.Rad2Deg,h=f.y*IG.Math.Rad2Deg,i=f.z*IG.Math.Rad2Deg;IGX.API.SetXRotation(a+c.HeadX,g),IGX.API.SetYRotation(a+c.HeadY,h),IGX.API.SetZRotation(a+c.HeadZ,i)})},KinematicsInteractor.prototype.solve=function(){var a=this._Chain,b=IG.Math.Vector3.magnitude(IG.Math.Vector3.sub(a._OriginPos,a._TargetPos));if(b>a._TotalLength)for(var c=0;c<a.Joints.length;c++){var d=IG.Math.Vector3.magnitude(IG.Math.Vector3.sub(a._TargetPos,a.Joints[c]._HeadPos)),e=a.Joints[c]._Length/d,f=IG.Math.Vector3.add(IG.Math.Vector3.scalarMultiply(1-e,a.Joints[c]._HeadPos),IG.Math.Vector3.scalarMultiply(e,a._TargetPos));a.Joints[c]._TailPos=f,a.Joints[c+1]&&(a.Joints[c+1]._HeadPos=f)}else{var g=0,h=20;null!=a.MaxIterations&&(h=a.MaxIterations);for(var i=a.Joints[a.Joints.length-1]._TailPos,d=IG.Math.Vector3.magnitude(IG.Math.Vector3.sub(i,a._TargetPos));d>a.Tolerance&&(this.backward(),this.forward(),d=IG.Math.Vector3.magnitude(IG.Math.Vector3.sub(i,a._TargetPos)),g++,!(g>h)););}},KinematicsInteractor.prototype.backward=function(){for(var a=this._Chain,b=a.Joints.length-1;b>=0;b--){var c=a.Joints[b];if(!c._Blocked){b===a.Joints.length-1?c._TailPos=a._TargetPos:c._TailPos=a.Joints[b+1]._HeadPos;var d=IG.Math.Vector3.magnitude(IG.Math.Vector3.sub(c._TailPos,c._HeadPos)),e=c._Length/d,f=IG.Math.Vector3.add(IG.Math.Vector3.scalarMultiply(1-e,c._TailPos),IG.Math.Vector3.scalarMultiply(e,c._HeadPos));c._HeadPos=f}}},KinematicsInteractor.prototype.forward=function(){for(var a=this._Chain,b=0;b<a.Joints.length;b++){var c=a.Joints[b];if(!c._Blocked){0===b?c._HeadPos=a._OriginPos:c._HeadPos=a.Joints[b-1]._TailPos;var d=IG.Math.Vector3.sub(c._TailPos,c._HeadPos),e=IG.Math.Vector3.magnitude(d),f=c._Length/e,g=IG.Math.Vector3.add(IG.Math.Vector3.scalarMultiply(1-f,c._HeadPos),IG.Math.Vector3.scalarMultiply(f,c._TailPos));if(this.isConstraintActive(b)){var h=IG.Math.Vector3.normalize(d);g=IG.Math.Vector3.add(c._HeadPos,this.constrain(IG.Math.Vector3.sub(g,c._HeadPos),h,b))}c._TailPos=g}}},KinematicsInteractor.prototype.constrain=function(a,b,c){var d=this._Chain,e=d.Joints[c],f=this.getGeometryBase(c),g=this.getBoneEuler(f,e._HeadPos,IG.Math.Vector3.add(e._HeadPos,b)),h=g.x*IG.Math.Rad2Deg,i=g.y*IG.Math.Rad2Deg,j=g.z*IG.Math.Rad2Deg;"x"===f?(i>e.LimitLeft?i=e.LimitLeft:i<-e.LimitRight&&(i=-e.LimitRight),j>e.LimitUp?j=e.LimitUp:j<-e.LimitDown&&(j=-e.LimitDown)):"z"===f&&(i>e.LimitLeft?i=e.LimitLeft:i<-e.LimitRight&&(i=-e.LimitRight),h>e.LimitDown?h=e.LimitDown:h<-e.LimitUp&&(h=-e.LimitUp));var k=g.x-h*IG.Math.Deg2Rad,l=g.y-i*IG.Math.Deg2Rad,m=g.z-j*IG.Math.Deg2Rad,n=IG.Math.Matrix4.getXRotationMatrix(k),o=IG.Math.Matrix4.getYRotationMatrix(l),p=IG.Math.Matrix4.getZRotationMatrix(m),q=a;return q=IG.Math.Vector3.multiplyWithMatrix4(q,n),q=IG.Math.Vector3.multiplyWithMatrix4(q,o),q=IG.Math.Vector3.multiplyWithMatrix4(q,p)},KinematicsInteractor}();Std.KinematicsInteractor=KinematicsInteractor}(Std=IGX.Std||(IGX.Std={}))}(IGX||(IGX={}));var IGX;!function(IGX){var Std;!function(Std){var defaultState={Position:{X:0,Y:0,Z:0},Rotation:{X:0,Y:0,Z:0},Scaling:{X:1,Y:1,Z:1},Deformation:0},createDefaultInjectedAnimationState=function(a,b){var c=__assign({},a,{Position:__assign({},a.Position),Rotation:__assign({},a.Rotation),Scaling:__assign({},a.Scaling)});for(var d in b){for(var e=d.split("."),f=c,g=defaultState,h=0;h<e.length-1;h++){var i=e[h],j=f[i];f=j,g&&(g=g[i])}var k=e[e.length-1];(void 0===f[k]||null===f[k]&&g)&&(f[k]=g[k])}return c},AnimationInteractor=function(_super){function AnimationInteractor(a){var b=this;Std.SetupValue(a,Std.Start,0),Std.SetupValue(a,Std.End,1),Std.SetupAnimation(a),b=_super.call(this,a)||this;var c=b.PrepAnimation(a.Animation);if(b.animation=c.Animation,b.kinematics=c.Kinematics,b.parameters.BackwardAnimation){var d=b.PrepAnimation(a.BackwardAnimation);b.backwardAnimation=d.Animation,b.backwardKinematics=d.Kinematics}var e=20;b.params=new Array(e);for(var f=0;f<e;f++){b.params[f]=null;var g=a["Param"+(f+1)];g&&(g="string"!=typeof g?g.toString():g,b.params[f]=g)}return b}return __extends(AnimationInteractor,_super),AnimationInteractor.prototype.PrepAnimation=function(paramsAnimation){if("string"==typeof paramsAnimation){paramsAnimation=eval(paramsAnimation);var tAnimations_1=[];paramsAnimation.Animations.forEach(function(animation){var usedProperties={};for(var timeString in animation.States){var state=animation.States[timeString];for(var key in state){var value=state[key];if("object"==typeof value)for(var subKey in value)usedProperties[key+"."+subKey]=!0;else usedProperties[key]=!0}}var tStates=[],tLastTimeString,tLastTime;for(var tTimeString in animation.States){var tTime=eval(tTimeString);tLastTimeString?tStates.push({time:tTime,period:tTime-tLastTime,state1:createDefaultInjectedAnimationState(animation.States[tLastTimeString],usedProperties),state2:createDefaultInjectedAnimationState(animation.States[tTimeString],usedProperties)}):tStates.push({time:tTime,state1:createDefaultInjectedAnimationState(animation.States[tTimeString],usedProperties)}),tLastTimeString=tTimeString,tLastTime=tTime}tStates.push({time:9999,state1:createDefaultInjectedAnimationState(animation.States[tLastTimeString],usedProperties)}),void 0===animation.Path&&(animation.Path="."),void 0===animation.Mode&&(animation.Mode="Linear"),tAnimations_1.push({path:animation.Path,mode:animation.Mode,states:tStates})}),paramsAnimation._loops=tAnimations_1;var paramsKinematics=null;return"object"==typeof paramsAnimation.Kinematics&&(paramsKinematics=new Std.KinematicsInteractor(paramsAnimation.Kinematics)),{Animation:paramsAnimation,Kinematics:paramsKinematics}}return console.log("IGX.Std.AnimationInteractor: No Animation specified."),{}},AnimationInteractor.prototype.SetPosition=function(a){return this.SetStagePosition(this.parameters.Stage,a===Std.Start?this.parameters[Std.Start]:this.parameters[Std.End])},AnimationInteractor.prototype.SetStagePosition=function(a,b,c){var d=this;if(void 0!==this.animation&&(this.backwardAnimation||(c=!1),this.parameters.Stage===a)){b<0?b=0:b>1&&(b=1);var e=this.animation;c&&(e=this.backwardAnimation);var f={};this.animation.LinkedPoints&&Object.keys(this.animation.LinkedPoints).forEach(function(a){var b=d.animation.LinkedPoints[a]||[];b.forEach(function(b){var c=d.GetComponentId(),e=c.split("_")[0]+"__",g=Std.Util.GetLocalTransform(e+".",c+"."+a);f[b]={ppath:a,tf:g}})});var g=new Array;e._loops.forEach(function(a){var c=!1;a.states.forEach(function(e){if(c===!1&&b<=e.time){var f=d.GetComponentId();if("."!==a.path&&(f=Std.getAbsPath(f,a.path)),IGX.API.IsValid(f)===!1)return;g.push(f);var h=/param(\d+)/i,i=function(a,b){var c=a.match(h);if(c){var d=parseInt(c[1]);return d--,parseFloat(b[d])}};if(void 0===e.state2){if(e.state1.Position){var j=IGX.API.GetPosition(f);if(void 0!==e.state1.Position.X){var k=e.state1.Position.X;j.x="string"==typeof k?i(k,d.params):k,j.x=isNaN(j.x)?0:j.x}if(void 0!==e.state1.Position.Y){var l=e.state1.Position.Y;j.y="string"==typeof l?i(l,d.params):l,j.y=isNaN(j.y)?0:j.y}if(void 0!==e.state1.Position.Z){var m=e.state1.Position.Z;j.z="string"==typeof m?i(m,d.params):m,j.z=isNaN(j.z)?0:j.z}IGX.API.SetPosition(f,j)}if(e.state1.Rotation){if(void 0!==e.state1.Rotation.X){var k=e.state1.Rotation.X,n="string"==typeof k?i(k,d.params):k;n=isNaN(n)?0:n,IGX.API.SetXRotation(f,n)}if(void 0!==e.state1.Rotation.Y){var l=e.state1.Rotation.Y,o="string"==typeof l?i(l,d.params):l;o=isNaN(o)?0:o,IGX.API.SetYRotation(f,o)}if(void 0!==e.state1.Rotation.Z){var m=e.state1.Rotation.Z,p="string"==typeof m?i(m,d.params):m;p=isNaN(p)?0:p,IGX.API.SetZRotation(f,p)}}if(e.state1.Scaling){var q=IGX.API.GetScaling(f);if(void 0!==e.state1.Scaling.X){var k=e.state1.Scaling.X;q.x="string"==typeof k?i(k,d.params):k,q.x=isNaN(q.x)?1:q.x}if(void 0!==e.state1.Scaling.Y){var l=e.state1.Scaling.Y;q.y="string"==typeof l?i(l,d.params):l,q.y=isNaN(q.y)?1:q.y}if(void 0!==e.state1.Scaling.Z){var m=e.state1.Scaling.Z;q.z="string"==typeof m?i(m,d.params):m,q.z=isNaN(q.z)?1:q.z}IGX.API.SetScaling(f,q)}if(void 0!==e.state1.Deformation){var r=e.state1.Deformation,s="string"==typeof r?i(r,d.params):r;s=isNaN(s)?0:s,IGX.API.SetDeformation(f,s)}if(void 0!==e.state1.Visibility){var t=e.state1.Visibility;"string"==typeof t&&(t="true"===d.params[parseInt(t.match(h)[1])-1]),IGX.API.SetVisibility(f,t)}}else{var u=(e.time-b)/e.period,v=1-u;if(e.state1.Position){var j=IGX.API.GetPosition(f);if(void 0!==e.state1.Position.X){var w=e.state1.Position.X,x="string"==typeof w?i(w,d.params):w;x=isNaN(x)?0:x;var y=e.state2.Position.X?e.state2.Position.X:0,z="string"==typeof y?i(y,d.params):y;z=isNaN(z)||void 0===z?0:z,j.x=u*x+v*z}if(void 0!==e.state1.Position.Y){var A=e.state1.Position.Y,x="string"==typeof A?i(A,d.params):A;x=isNaN(x)?0:x;var B=e.state2.Position.Y?e.state2.Position.Y:0,z="string"==typeof B?i(B,d.params):B;z=isNaN(z)||void 0===z?0:z,j.y=u*x+v*z}if(void 0!==e.state1.Position.Z){var C=e.state1.Position.Z,x="string"==typeof C?i(C,d.params):C;x=isNaN(x)?0:x;var D=e.state2.Position.Z?e.state2.Position.Z:0,z="string"==typeof D?i(D,d.params):D;z=isNaN(z)||void 0===z?0:z,j.z=u*x+v*z}IGX.API.SetPosition(f,j)}else if(e.state2.Position){var j=IGX.API.GetPosition(f);if(void 0!==e.state2.Position.X){var y=e.state2.Position.X,z="string"==typeof y?i(y,d.params):y;z=isNaN(z)?0:z,j.x=v*z}if(void 0!==e.state2.Position.Y){var B=e.state2.Position.Y,z="string"==typeof B?i(B,d.params):B;z=isNaN(z)?0:z,j.y=v*z}if(void 0!==e.state2.Position.Z){var D=e.state2.Position.Z,z="string"==typeof D?i(D,d.params):D;z=isNaN(z)?0:z,
j.z=v*z}IGX.API.SetPosition(f,j)}if(e.state1.Rotation){if(void 0!==e.state1.Rotation.X){var w=e.state1.Rotation.X,x="string"==typeof w?i(w,d.params):w;x=isNaN(x)?0:x;var y=e.state2.Rotation.X?e.state2.Rotation.X:0,z="string"==typeof y?i(y,d.params):y;z=isNaN(z)||void 0===z?0:z,IGX.API.SetXRotation(f,u*x+v*z)}if(void 0!==e.state1.Rotation.Y){var A=e.state1.Rotation.Y,x="string"==typeof A?i(A,d.params):A;x=isNaN(x)?0:x;var B=e.state2.Rotation.Y?e.state2.Rotation.Y:0,z="string"==typeof B?i(B,d.params):B;z=isNaN(z)||void 0===z?0:z,IGX.API.SetYRotation(f,u*x+v*z)}if(void 0!==e.state1.Rotation.Z){var C=e.state1.Rotation.Z,x="string"==typeof C?i(C,d.params):C;x=isNaN(x)?0:x;var D=e.state2.Rotation.Z?e.state2.Rotation.Z:0,z="string"==typeof D?i(D,d.params):D;z=isNaN(z)||void 0===z?0:z,IGX.API.SetZRotation(f,u*x+v*z)}}else if(e.state2.Rotation){if(void 0!==e.state2.Rotation.X){var y=e.state2.Rotation.X,z="string"==typeof y?i(y,d.params):y;z=isNaN(z)?0:z,IGX.API.SetXRotation(f,v*z)}if(void 0!==e.state2.Rotation.Y){var B=e.state2.Rotation.Y,z="string"==typeof B?i(B,d.params):B;z=isNaN(z)?0:z,IGX.API.SetYRotation(f,v*z)}if(void 0!==e.state2.Rotation.Z){var D=e.state2.Rotation.Z,z="string"==typeof D?i(D,d.params):D;z=isNaN(z)?0:z,IGX.API.SetZRotation(f,v*z)}}if(e.state1.Scaling){var q=IGX.API.GetScaling(f);if(void 0!==e.state1.Scaling.X){var w=e.state1.Scaling.X,x="string"==typeof w?i(w,d.params):w;x=isNaN(x)?1:x;var y=e.state2.Scaling.X?e.state2.Scaling.X:1,z="string"==typeof y?i(y,d.params):y;z=isNaN(z)?1:z,void 0===z&&(z=1),q.x=u*x+v*z}if(void 0!==e.state1.Scaling.Y){var A=e.state1.Scaling.Y,x="string"==typeof A?i(A,d.params):A;x=isNaN(x)?1:x;var B=e.state2.Scaling.Y?e.state2.Scaling.Y:1,z="string"==typeof B?i(B,d.params):B;z=isNaN(z)?1:z,void 0===z&&(z=1),q.y=u*x+v*z}if(void 0!==e.state1.Scaling.Z){var C=e.state1.Scaling.Z,x="string"==typeof C?i(C,d.params):C;x=isNaN(x)?1:x;var D=e.state2.Scaling.Z?e.state2.Scaling.Z:1,z="string"==typeof D?i(D,d.params):D;z=isNaN(z)?1:z,void 0===z&&(z=1),q.z=u*x+v*z}IGX.API.SetScaling(f,q)}else if(e.state2.Scaling){var q=IGX.API.GetScaling(f);if(void 0!==e.state2.Scaling.X){var y=e.state2.Scaling.X,z="string"==typeof y?i(y,d.params):y;z=isNaN(z)?1:z,q.x=u+v*z}if(void 0!==e.state2.Scaling.Y){var B=e.state2.Scaling.Y,z="string"==typeof B?i(B,d.params):B;z=isNaN(z)?1:z,q.y=u+v*z}if(void 0!==e.state2.Scaling.Z){var D=e.state2.Scaling.Z,z="string"==typeof D?i(D,d.params):D;z=isNaN(z)?1:z,q.z=u+v*z}IGX.API.SetScaling(f,q)}if(void 0!==e.state1.Deformation){var E=e.state1.Deformation,x="string"==typeof E?i(E,d.params):E;x=isNaN(x)?0:x;var F=e.state2.Deformation,z="string"==typeof F?i(F,d.params):F;z=isNaN(z)?0:z,void 0===z&&(z=0),IGX.API.SetDeformation(f,u*x+v*z)}else if(void 0!==e.state2.Deformation){var F=e.state2.Deformation,z="string"==typeof F?i(F,d.params):F;z=isNaN(z)?0:z,IGX.API.SetDeformation(f,v*z)}if(void 0!==e.state1.Visibility){var t=e.state1.Visibility;"string"==typeof t&&(t="true"===d.params[parseInt(t.match(h)[1])-1]),IGX.API.SetVisibility(f,t)}else if(void 0!==e.state2.Visibility){var t=e.state2.Visibility;"string"==typeof t&&(t="true"===d.params[parseInt(t.match(h)[1])-1]),IGX.API.SetVisibility(f,t)}}c=!0}})});var h=this.kinematics;c&&(h=this.backwardKinematics),h&&h.KinematicSolver(this.GetComponentId(),this.params,g),f&&Object.keys(f).forEach(function(a){var b=f[a].ppath,c=d.GetComponentId(),e=c.split("_")[0]+"__",g=Std.Util.GetLocalTransform(e+".",c+"."+b);IGX.API.SetPoint(e+".",a,g[0],g[1])})}},AnimationInteractor}(IGX.Core.Interactor);Std.AnimationInteractor=AnimationInteractor,Std.Test1={Id:"Test1",Animations:[{States:{.1:{Position:{Y:.1}},.6:{Position:{Y:.2}},.9:{Position:{Y:1}}}}]}}(Std=IGX.Std||(IGX.Std={}))}(IGX||(IGX={}));var IGX;!function(IGX){var Std;!function(Std){var inverse="Inverse",DeformationInteractor=function(_super){function DeformationInteractor(parameters){var _this=this;return Std.SetupValue(parameters,Std.Start,0),Std.SetupValue(parameters,Std.End,1),Std.SetupAnimation(parameters),_this=_super.call(this,parameters)||this,void 0===parameters[inverse]?parameters[inverse]=!1:typeof parameters[inverse]===Std.cString?parameters[inverse]=1==eval(parameters[inverse]):parameters[inverse]=1==parameters[inverse],_this.parameters[Std.Manual]=!1,_this}return __extends(DeformationInteractor,_super),DeformationInteractor.prototype.SetPosition=function(a){this.SetStagePosition(this.parameters.Stage,a===Std.Start?this.parameters[Std.Start]:this.parameters[Std.End])},DeformationInteractor.prototype.SetStagePosition=function(a,b){a===this.parameters.Stage&&IGX.API.SetDeformation(this.GetComponentId(),this.parameters[inverse]?1-b:b)},DeformationInteractor}(IGX.Core.Interactor);Std.DeformationInteractor=DeformationInteractor}(Std=IGX.Std||(IGX.Std={}))}(IGX||(IGX={}));var IGX;!function(a){var b;!function(b){var c="Maximum",d="Minimum",e="Thickness",f="RotationAxis",g="Offset",h=function(h){function i(a){var i=this;return b.SetupValue(a,c,90),b.SetupValue(a,d,0),b.SetupValue(a,e,0),"X"!=a[f]&&"Y"!=a[f]&&"Z"!=a[f]&&(a[f]="X"),"Right"!=a[g]&&(a[g]="Left"),b.SetupAnimation(a),i=h.call(this,a)||this}return __extends(i,h),i.prototype.SetPosition=function(a){switch(a){case b.Start:this.setPosition(0);break;case b.End:this.setPosition(1)}},i.prototype.setPosition=function(h){this.position||(this.position=a.API.GetPosition(this.GetComponentId()));var i=this.parameters[g],j=this.parameters[f],k=this.parameters[e]*h;if(!(void 0===this.parameters[b.Start]&&void 0===this.parameters[b.StageStart]&&void 0===this.parameters[d]||void 0===this.parameters[b.End]&&void 0===this.parameters[b.StageEnd]&&void 0===this.parameters[c])){var l,m;l=void 0===this.parameters[b.StageStart]?void 0===this.parameters[b.Start]?this.parameters[d]:this.parameters[b.Start]:this.parameters[b.StageStart],m=void 0===this.parameters[b.StageEnd]?void 0===this.parameters[b.End]?this.parameters[c]:this.parameters[b.End]:this.parameters[b.StageEnd];var n=l+(m-l)*h,o=new a.Float3;if(o.x=this.position.x,o.y=this.position.y,o.z=this.position.z,"Left"===i)switch(j){case"X":o.z+=k,a.API.SetPosition(this.GetComponentId(),o),a.API.SetXRotation(this.GetComponentId(),-n);break;case"Y":o.z+=k,a.API.SetPosition(this.GetComponentId(),o),a.API.SetYRotation(this.GetComponentId(),-n);break;case"Z":o.x-=k,a.API.SetPosition(this.GetComponentId(),o),a.API.SetZRotation(this.GetComponentId(),-n)}else switch(j){case"X":o.z+=k,a.API.SetPosition(this.GetComponentId(),o),a.API.SetXRotation(this.GetComponentId(),n);break;case"Y":o.z+=k,a.API.SetPosition(this.GetComponentId(),o),a.API.SetYRotation(this.GetComponentId(),n);break;case"Z":o.x+=k,a.API.SetPosition(this.GetComponentId(),o),a.API.SetZRotation(this.GetComponentId(),n)}}},i.prototype.SetStagePosition=function(a,c){a.toString()===this.parameters[b.Stage].toString()&&this.setPosition(c)},i}(a.Core.Interactor);b.OffsetRotator=h}(b=a.Std||(a.Std={}))}(IGX||(IGX={}));var IGX;if(function(IGX){var Std;!function(Std){var treshold="Treshold",VisibilityInteractor=function(_super){function VisibilityInteractor(parameters){var _this=this;return Std.SetupAnimation(parameters),_this=_super.call(this,parameters)||this,typeof parameters[treshold]===Std.cString?parameters[treshold]=eval(parameters[treshold]):typeof parameters[treshold]===Std.cNumber?parameters[treshold]=parameters[treshold]:void 0===parameters[treshold]&&(parameters[treshold]=.1),_this}return __extends(VisibilityInteractor,_super),VisibilityInteractor.prototype.SetPosition=function(a){this.SetStagePosition(this.parameters.Stage,a===Std.Start?0:1)},VisibilityInteractor.prototype.SetStagePosition=function(a,b){a===this.parameters.Stage&&IGX.API.SetVisibility(this.GetComponentId(),b<this.parameters[treshold])},VisibilityInteractor}(IGX.Core.Interactor);Std.VisibilityInteractor=VisibilityInteractor}(Std=IGX.Std||(IGX.Std={}))}(IGX||(IGX={})),console.log("IG.GFX.Standard 1.7.1. Copyright (C) 2013 - 2020 intelligentgraphics. All Rights Reserved."),!IGX.Float3){var Float3=function(){function a(a,b,c){this.x=void 0===a?0:a,this.y=void 0===b?0:b,this.z=void 0===c?0:c}return a}();IGX.Float3=Float3}
IGX.Std.Test2 = {"Id":"Test2","Animations":[{"Path":null,"Mode":null,"States":{"0.1":{"Position":{"X":0.0,"Y":0.1,"Z":0.0},"Rotation":null,"Scale":null,"Deformation":0.0},"0.6":{"Position":{"X":0.0,"Y":0.2,"Z":0.0},"Rotation":null,"Scale":null,"Deformation":0.0},"0.9":{"Position":{"X":0.0,"Y":1.0,"Z":0.0},"Rotation":null,"Scale":null,"Deformation":0.0}}}]}